
package specialproblem;

import com.teamdev.jxbrowser.chromium.Browser;
import com.teamdev.jxbrowser.chromium.swing.BrowserView;

import com.teamdev.jxbrowser.chromium.Browser;
import java.awt.BorderLayout;

import java.io.IOException;
import static java.lang.Integer.parseInt;
import java.util.ArrayList;
import java.util.Random;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.WindowConstants;

/**
* special problem user interface
* 
* @author Gaezel Dorato
*/
public class SpecialProblemUI extends javax.swing.JFrame {
    static MapUI mapUI;
    static Map map ;
    static ABC abc;
    static TS ts;
    static ACO aco;
    static GA ga;
    
    /**
     * Main Class
     * 
     * @throws java.io.IOException exception
     */
    public SpecialProblemUI() throws IOException {
        map = initialize();
        initialize();
        initComponents();
        mapUI = new MapUI();
    }
    
    /**
     * initializes map data vertices, edges and depots
     * 
     * @return Map map data
     * @throws IOException exception
     */
    public Map initialize() throws IOException {
        Map map = new Map();
        map.addVertices("dataFile.txt");
        map.addEdges("dataEdges.txt");
        map.addDepot(1);
        map.addDepot(7);
        map.addDepot(101);
        map.addDepot(112);
        map.addDepot(210);
        map.addDepot(559);
        map.addDepot(560);
        map.addDepot(564);
        map.addDepot(565);
        map.addDepot(566);
        map.addDepot(568);
        return map;
    }
    
  
    /**
     * convert route Ids to javascript latlng coordinates
     * 
     * @param routes    ArrayList<String> path coordinates
     * @param depots    ArrayList<String> depot coordinates
     * @param routeIds  String[] String representation of route
     */
    private void makeRouteScript(ArrayList<String> routes, ArrayList<String> depots, String[] routeIds) {
        String coordinates = "";
        
        int id = parseInt(routeIds[routeIds.length-1]);
        depots.add(""+map.getVertex(id).getCoordinates());
          
        for(int i = 1; i < routeIds.length; i++) {
           id =  parseInt(routeIds[i]);
           coordinates += map.getVertex(id).getCoordinates();
        
           if(routeIds.length != 1 && i != routeIds.length-1) {
               coordinates += ",";
           }
           coordinates += "\n";
        } 
        routes.add(coordinates);
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel3 = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jPanel2 = new javax.swing.JPanel();
        receiveButton = new javax.swing.JButton();
        abcButton = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        tsButton = new javax.swing.JButton();
        acoButton = new javax.swing.JButton();
        gaButton = new javax.swing.JButton();
        multipleReceiveButton = new javax.swing.JButton();
        searchButton = new javax.swing.JButton();
        openMapButton = new javax.swing.JButton();
        setLocationButton = new javax.swing.JButton();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        jSeparator1 = new javax.swing.JPopupMenu.Separator();
        jMenuItem2 = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(102, 102, 102));

        jPanel3.setBackground(new java.awt.Color(51, 51, 51));

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 476, Short.MAX_VALUE)
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 477, Short.MAX_VALUE)
        );

        jPanel1.setBackground(new java.awt.Color(0, 102, 102));

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        receiveButton.setFont(new java.awt.Font("Tahoma", 1, 16)); // NOI18N
        receiveButton.setForeground(new java.awt.Color(0, 102, 153));
        receiveButton.setText("Receive Call");
        receiveButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                receiveButtonActionPerformed(evt);
            }
        });

        abcButton.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        abcButton.setForeground(new java.awt.Color(0, 102, 153));
        abcButton.setText("ABC");
        abcButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                abcButtonActionPerformed(evt);
            }
        });

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLabel1.setText("Ambulance Routing");

        tsButton.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        tsButton.setForeground(new java.awt.Color(0, 102, 153));
        tsButton.setText("TS");
        tsButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tsButtonActionPerformed(evt);
            }
        });

        acoButton.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        acoButton.setForeground(new java.awt.Color(0, 102, 153));
        acoButton.setText("ACO");
        acoButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                acoButtonActionPerformed(evt);
            }
        });

        gaButton.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        gaButton.setForeground(new java.awt.Color(0, 102, 153));
        gaButton.setText("GA");
        gaButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                gaButtonActionPerformed(evt);
            }
        });

        multipleReceiveButton.setFont(new java.awt.Font("Tahoma", 1, 16)); // NOI18N
        multipleReceiveButton.setForeground(new java.awt.Color(0, 102, 153));
        multipleReceiveButton.setText("Receive Multiple Calls");
        multipleReceiveButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                multipleReceiveButtonActionPerformed(evt);
            }
        });

        searchButton.setFont(new java.awt.Font("Tahoma", 1, 16)); // NOI18N
        searchButton.setForeground(new java.awt.Color(0, 102, 153));
        searchButton.setText("Search");
        searchButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(55, 55, 55)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(71, 71, 71)
                        .addComponent(jLabel1)
                        .addContainerGap(102, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(receiveButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(multipleReceiveButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addGap(55, 55, 55))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(searchButton, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(abcButton)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(acoButton)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(gaButton, javax.swing.GroupLayout.PREFERRED_SIZE, 62, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(tsButton, javax.swing.GroupLayout.PREFERRED_SIZE, 62, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(24, 24, 24)
                .addComponent(receiveButton, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 9, Short.MAX_VALUE)
                .addComponent(multipleReceiveButton, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(42, 42, 42)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(tsButton, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(abcButton, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(acoButton, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(gaButton, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(searchButton, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(30, 30, 30))
        );

        openMapButton.setFont(new java.awt.Font("Tahoma", 1, 16)); // NOI18N
        openMapButton.setForeground(new java.awt.Color(0, 102, 153));
        openMapButton.setText("Map");
        openMapButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openMapButtonActionPerformed(evt);
            }
        });

        setLocationButton.setFont(new java.awt.Font("Tahoma", 1, 16)); // NOI18N
        setLocationButton.setForeground(new java.awt.Color(0, 102, 153));
        setLocationButton.setText("Set Location");
        setLocationButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                setLocationButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(50, 50, 50)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jScrollPane1))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(23, 23, 23)
                        .addComponent(openMapButton, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(29, 29, 29)
                        .addComponent(setLocationButton, javax.swing.GroupLayout.PREFERRED_SIZE, 212, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(50, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(50, 50, 50)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(40, 40, 40)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(openMapButton, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(setLocationButton, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(36, 36, 36)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 187, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(50, Short.MAX_VALUE))
        );

        jMenu1.setText("Help");
        jMenu1.setAlignmentX(1.0F);
        jMenu1.setAlignmentY(1.0F);

        jMenuItem1.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_H, java.awt.event.InputEvent.ALT_MASK | java.awt.event.InputEvent.CTRL_MASK));
        jMenuItem1.setFont(new java.awt.Font("SansSerif", 0, 14)); // NOI18N
        jMenuItem1.setText("How To");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem1);
        jMenu1.add(jSeparator1);

        jMenuItem2.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_A, java.awt.event.InputEvent.ALT_MASK | java.awt.event.InputEvent.CTRL_MASK));
        jMenuItem2.setFont(new java.awt.Font("SansSerif", 0, 14)); // NOI18N
        jMenuItem2.setText("About");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem2ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem2);

        jMenuBar1.add(jMenu1);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(40, Short.MAX_VALUE))
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel3, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 21, Short.MAX_VALUE))
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
    
    private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchButtonActionPerformed
        int best = 0;
        double bestTime = 0;
        ArrayList<String> routes = new ArrayList<>();
        ArrayList<String> depots = new ArrayList<>();
        ArrayList<String> patients = new ArrayList<>();
        
        //abc search
        abc = new ABC(map);
        String output = abc.abcSearch();
        bestTime = abc.getAbcTime();
        jTextArea1.append(output);
        
        ArrayList<String> result = abc.getRoute(); 
        String[]routeIds = result.get(0).split("-"); 
        int id =  parseInt(routeIds[1]);
        patients.add("" + map.getVertex(id).getCoordinates());
        makeRouteScript(routes,depots,routeIds);
        
        //tabu search
        ts = new TS(map);   
        output = ts.tabuSearch();
        if(ts.getTsTime() < bestTime) best = 1;
        jTextArea1.append(output);
        
        result = ts.getRoute();
        routeIds = routeIds = result.get(0).split("-"); 
        makeRouteScript(routes,depots,routeIds);
        
        // ant colony
        aco = new ACO(map);   
        output = aco.acoSearch();
        if(aco.getAcoTime() < bestTime) best = 2;
        jTextArea1.append(output);
        
        result = aco.getRoute();
        routeIds = routeIds = result.get(0).split("-");  
        makeRouteScript(routes,depots,routeIds);
        
        
        // genetic algorithm
        ga = new GA(map);   
        output = ga.gaSearch();
        if(ga.getGaTime() < bestTime) best = 3;
        jTextArea1.append(output);
        
        result = ga.getRoute();
        routeIds = routeIds = result.get(0).split("-");   
        makeRouteScript(routes,depots,routeIds);
        
        MapUI mapUI = new MapUI();
        mapUI.runMap(patients,depots,routes,best);  
    }//GEN-LAST:event_searchButtonActionPerformed

    private void receiveButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_receiveButtonActionPerformed

        jTextArea1.setText( map.setSinglePatient());
    }//GEN-LAST:event_receiveButtonActionPerformed

    private void abcButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_abcButtonActionPerformed
        ArrayList<String> routes = new ArrayList<>();
        ArrayList<String> depots = new ArrayList<>();
        ArrayList<String> patients = new ArrayList<>();
        map.initDepots();
        abc = new ABC(map);
        String result = abc.abcSearch();
        jTextArea1.append(result);
          
        //abc search
        ArrayList<String> output = abc.getRoute();
        for(String route:output) {
            String[]routeIds = route.split("-"); 
            int id =  parseInt(routeIds[1]);
            patients.add("" + map.getVertex(id).getCoordinates());
            makeRouteScript(routes,depots,routeIds);
        }       
        MapUI mapUI = new MapUI();
        mapUI.runMap(patients,depots,routes,0);
        
    }//GEN-LAST:event_abcButtonActionPerformed

    private void tsButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tsButtonActionPerformed
        ArrayList<String> routes = new ArrayList<>();
        ArrayList<String> depots = new ArrayList<>();
        ArrayList<String> patients = new ArrayList<>();
        map.initDepots();
        ts = new TS(map);
        String result = ts.tabuSearch();
        jTextArea1.append(result);
          
        ArrayList<String> output = ts.getRoute();
       
        for(String route:output) {
            String[]routeIds = route.split("-"); 
            int id =  parseInt(routeIds[1]);
            patients.add("" + map.getVertex(id).getCoordinates());
            makeRouteScript(routes,depots,routeIds);
        }       
        MapUI mapUI = new MapUI();
        mapUI.runMap(patients,depots,routes,1);
    }//GEN-LAST:event_tsButtonActionPerformed

    private void acoButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_acoButtonActionPerformed
        ArrayList<String> routes = new ArrayList<>();
        ArrayList<String> depots = new ArrayList<>();
        ArrayList<String> patients = new ArrayList<>();
        map.initDepots();
        aco = new ACO(map);
        String result = aco.acoSearch();
        jTextArea1.append(result);
          
        ArrayList<String> output = aco.getRoute();
       
        for(String route:output) {
            String[]routeIds = route.split("-"); 
            int id =  parseInt(routeIds[1]);
            patients.add("" + map.getVertex(id).getCoordinates());
            makeRouteScript(routes,depots,routeIds);
        }       
        MapUI mapUI = new MapUI();
        mapUI.runMap(patients,depots,routes,2);
    }//GEN-LAST:event_acoButtonActionPerformed

    private void gaButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_gaButtonActionPerformed
        ArrayList<String> routes = new ArrayList<>();
        ArrayList<String> depots = new ArrayList<>();
        ArrayList<String> patients = new ArrayList<>();
        map.initDepots();
        ga = new GA(map);
        String result = ga.gaSearch();
        jTextArea1.append(result);
          
        ArrayList<String> output = ga.getRoute();
       
        for(String route:output) {
            String[]routeIds = route.split("-"); 
            int id =  parseInt(routeIds[1]);
            patients.add("" + map.getVertex(id).getCoordinates());
            makeRouteScript(routes,depots,routeIds);
        }       
        MapUI mapUI = new MapUI();
        mapUI.runMap(patients,depots,routes,3);
    }//GEN-LAST:event_gaButtonActionPerformed

    private void multipleReceiveButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_multipleReceiveButtonActionPerformed
        int r = 6;//(int)Math.round(Math.random()* 560);
        jTextArea1.setText("Customers: " + r);
        map.setPatients(r);
    }//GEN-LAST:event_multipleReceiveButtonActionPerformed

    private void openMapButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_openMapButtonActionPerformed
        mapUI.openMap(map.getVertices());
        
    }//GEN-LAST:event_openMapButtonActionPerformed
      
    private void setLocationButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_setLocationButtonActionPerformed
        map.clearPatient();
        String s = mapUI.getLocation();
       // jTextArea1.append(s);
        String [] coor = s.split(",");
        double latitude = Double.parseDouble(coor[0]);
        double longitude = Double.parseDouble(coor[1]);
        
        double dist = map.getVertex(1).calcDistance(latitude, longitude);
        Vertex point = map.getVertex(1);
        
        for(Vertex v:map.getVertices()) {
            double min = v.calcDistance(latitude, longitude);
            
            if(min < dist) {
                dist = min;
                point = v;
            }
        }
       
        jTextArea1.append("Location set");
        long startTime = System.currentTimeMillis();
        Random r = new Random();
        long endTime = startTime + (long) ((r.nextDouble() * 60000) * 12) + 480000;
        map.addPatient(point.getId(), startTime, endTime);
    }//GEN-LAST:event_setLocationButtonActionPerformed

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
       new HowToGUI().setVisible(true);
    }//GEN-LAST:event_jMenuItem1ActionPerformed

    private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem2ActionPerformed
        new AboutGUI().setVisible(true);
    }//GEN-LAST:event_jMenuItem2ActionPerformed
    

    /**
     * main
     * @param args the command line arguments
     * @throws java.io.IOException
     */
    public static void main(String args[]) throws IOException {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new SpecialProblemUI().setVisible(true);
                } catch (IOException ex) {
                    Logger.getLogger(SpecialProblemUI.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton abcButton;
    private javax.swing.JButton acoButton;
    private javax.swing.JButton gaButton;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JPopupMenu.Separator jSeparator1;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JButton multipleReceiveButton;
    private javax.swing.JButton openMapButton;
    private javax.swing.JButton receiveButton;
    private javax.swing.JButton searchButton;
    private javax.swing.JButton setLocationButton;
    private javax.swing.JButton tsButton;
    // End of variables declaration//GEN-END:variables
}
